version: '3.6'
services:
  gateway-service:
    image: xmorse/apollo-federation-gateway
    ports:
      - "4000:80"
    depends_on:
      - originating-service
      - extending-service
    environment:
      - URL_0=http://originating-service:4000/graphql
      - URL_1=http://extending-service:4000/graphql
  originating-service:
    image: hiroyukiosaki/graphql-mesh:latest-all-alpine
    ports:
      - "4010:4000"
    restart: always
    volumes:
      - ./1.meshrc.yaml:/work/.meshrc.yaml
  extending-service:
    image: hiroyukiosaki/graphql-mesh:latest-all-alpine
    ports:
      - "4020:4000"
    restart: alwaysqqq
    volumes:
      - ./2.meshrc.yaml:/work/.meshrc.yaml
